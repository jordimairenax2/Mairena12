<!doctype html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Configurador Académico de Horarios</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <header class="hero">
      <h1>Configuración académica de horarios</h1>
      <p>Genera y gestiona horarios por coordinación, carrera, turno, periodo y año.</p>
    </header>

    <main class="layout">
      <nav class="tabs" aria-label="Secciones principales">
        <button class="tab-btn active" type="button" data-tab="principal">Principal</button>
        <button class="tab-btn" type="button" data-tab="configuracion">Configuración</button>
      </nav>

      <section class="card">
        <h2>Selección activa de la app</h2>
        <p class="hint">Esta selección se usa para la generación automática y para agregar clases manualmente.</p>
        <div class="grid-3">
          <label>
            Coordinación
            <select id="coordinacionPrincipal" required>
              <option value="">Selecciona una coordinación</option>
            </select>
          </label>
          <label>
            Carrera
            <select id="carreraPrincipal" required>
              <option value="">Selecciona una carrera</option>
            </select>
          </label>
          <label>
            Turno
            <select id="turnoPrincipal" required>
              <option value="">Selecciona un turno</option>
            </select>
          </label>
        </div>
      </section>

      <section id="tab-principal" class="tab-panel active">
        <section class="card">
          <h2>1. Adjuntar clases por carrera</h2>
          <p class="hint">Sube un CSV por cada carrera. El archivo queda asociado a coordinación + carrera.</p>
          <button type="button" id="descargarPlantillaCsv">Descargar plantilla CSV</button>
          <form id="adjuntarClasesForm" class="stacked-form">
            <div class="grid-2">
              <label>
                Coordinación
                <select id="coordinacionAdjunta" required>
                  <option value="">Selecciona una coordinación</option>
                </select>
              </label>
              <label>
                Carrera
                <select id="carreraAdjunta" required>
                  <option value="">Selecciona una carrera</option>
                </select>
              </label>
            </div>
            <label>
              CSV de clases (campos: clase,año,créditos,categorías,compartida)
              <input type="file" id="csvClases" accept=".csv,text/csv" required />
            </label>
            <p id="estadoCsvUpload" class="hint">Aún no seleccionas un archivo CSV.</p>
            <button type="submit">Adjuntar CSV</button>
          </form>
          <ul id="listaClasesAdjuntas" class="simple-list"></ul>
        </section>

        <section class="card">
          <h2>2. Generación automática por carrera</h2>
          <p class="hint">Usa la selección activa (coordinación/carrera/turno) y selecciona el periodo.</p>
          <form id="generarHorarioForm" class="stacked-form">
            <label>
              Periodo
              <select id="periodoPrincipal" required>
                <option value="">Selecciona un periodo</option>
              </select>
            </label>
            <button type="submit">Generar horarios por año</button>
          </form>
        </section>

        <section class="card">
          <h2>3. Agregar clase manual</h2>
          <p class="hint">Se agregará a la coordinación/carrera/turno seleccionados arriba.</p>
          <form id="claseManualForm" class="stacked-form">
            <div class="grid-3">
              <label>
                Año
                <select id="anioManual" required>
                  <option value="1">1</option>
                  <option value="2">2</option>
                  <option value="3">3</option>
                  <option value="4">4</option>
                  <option value="5">5</option>
                </select>
              </label>
              <label>
                Clase
                <input type="text" id="claseManual" required placeholder="Ej: Álgebra Lineal" />
              </label>
              <label>
                Créditos
                <input type="number" id="creditosManual" min="1" value="4" required />
              </label>
            </div>
            <label>
              Categorías
              <input type="text" id="categoriasManual" placeholder="Ej: Matemática" value="General" />
            </label>
            <button type="submit">Agregar clase manual</button>
          </form>
          <p id="estadoClaseManual" class="hint"></p>
        </section>

        <section class="card">
          <h2>4. Vista por coordinación - carrera - turno</h2>
          <p class="hint">Puedes usar estos filtros para revisar cualquier horario generado.</p>
          <div class="grid-3">
            <label>
              Coordinación
              <select id="filtroCoordinacion">
                <option value="">Selecciona una coordinación</option>
              </select>
            </label>
            <label>
              Carrera
              <select id="filtroCarrera">
                <option value="">Selecciona una carrera</option>
              </select>
            </label>
            <label>
              Turno
              <select id="filtroTurno">
                <option value="">Selecciona un turno</option>
              </select>
            </label>
          </div>
          <button type="button" id="verHorarioFiltrado">Ver horario filtrado</button>
          <button type="button" id="exportarHorarioCsv" disabled>Exportar horario mostrado (CSV)</button>
          <ul id="listaHorarios" class="simple-list"></ul>
        </section>
      </section>

      <section id="tab-configuracion" class="tab-panel">
        <section class="card">
          <h2>1. Configuración general académica</h2>
          <form id="generalForm" class="stacked-form">
            <label>
              Coordinación
              <input type="text" id="nombreCoordinacion" required placeholder="Ej: AQT" />
            </label>
            <label>
              Carreras asociadas (separadas por coma)
              <input type="text" id="carrerasCoordinacion" required placeholder="Ej: Arquitectura,Sistemas" />
            </label>
            <button type="submit">Guardar coordinación</button>
          </form>
          <ul id="listaCoordinaciones" class="simple-list"></ul>
        </section>

        <section class="card">
          <h2>2. Configuración de docentes y categorías</h2>
          <form id="categoriaForm" class="stacked-form">
            <label>
              Nueva categoría
              <input type="text" id="nombreCategoria" required placeholder="Ej: Matemática" />
            </label>
            <button type="submit">Registrar categoría</button>
          </form>
          <ul id="listaCategorias" class="simple-list"></ul>

          <hr />

          <form id="docenteForm" class="stacked-form">
            <label>
              Nombre del docente
              <input type="text" id="nombreDocente" required placeholder="Ej: Ana López" />
            </label>
            <label>
              Categorías del docente
              <select id="categoriasDocente" multiple required></select>
            </label>
            <button type="submit">Registrar docente</button>
          </form>
          <ul id="listaDocentes" class="simple-list"></ul>
        </section>

        <section class="card">
          <h2>3. Configuración de turno y reglas horarias</h2>
          <form id="turnoForm" class="stacked-form">
            <div class="grid-2">
              <label>
                Nombre del turno
                <input type="text" id="nombreTurno" required placeholder="Ej: Diurno" />
              </label>
              <label>
                Días habilitados (separados por coma)
                <input type="text" id="diasTurno" required placeholder="Lunes,Martes,Miércoles,Jueves,Viernes" />
              </label>
            </div>
            <label>
              Prioridad de días (formato Día:prioridad). Si vacío usa: Lunes:1,Martes:2,Miércoles:3,Jueves:4,Viernes:5
              <input type="text" id="prioridadDias" placeholder="Lunes:1,Martes:2,Miércoles:3" />
            </label>
            <div class="grid-3">
              <label>
                Hora inicio de clases
                <input type="time" id="horaInicio" value="08:00" required />
              </label>
              <label>
                Minutos por bloque
                <input type="number" id="minutosBloque" min="1" value="50" required />
              </label>
              <label>
                Créditos por bloque
                <input type="number" id="creditosBloque" min="1" value="1" required />
              </label>
            </div>
            <div class="grid-2">
              <label>
                Hora de receso
                <input type="time" id="horaReceso" value="10:00" required />
              </label>
              <label>
                Duración receso (min)
                <input type="number" id="duracionReceso" min="1" value="15" required />
              </label>
            </div>
            <div class="grid-2">
              <label>
                Hora de almuerzo
                <input type="time" id="horaAlmuerzo" value="12:00" required />
              </label>
              <label>
                Duración almuerzo (min)
                <input type="number" id="duracionAlmuerzo" min="1" value="60" required />
              </label>
            </div>
            <button type="submit">Guardar turno integrado</button>
          </form>
          <ul id="listaTurnos" class="simple-list"></ul>
        </section>

        <section class="card">
          <h2>4. Configuración de periodos por turno</h2>
          <form id="periodoForm" class="stacked-form">
            <div class="grid-2">
              <label>
                Turno
                <select id="turnoPeriodo" required>
                  <option value="">Selecciona un turno</option>
                </select>
              </label>
              <label>
                Nuevo periodo
                <input type="text" id="nombrePeriodo" required placeholder="Ej: 2025-1" />
              </label>
            </div>
            <button type="submit">Agregar periodo</button>
          </form>
          <ul id="listaPeriodos" class="simple-list"></ul>
        </section>

        <section class="card">
          <h2>5. Mantenimiento</h2>
          <p class="hint">La configuración no se borra; solo se reinician horarios y clases cargadas.</p>
          <button type="button" id="reiniciarHorarios">Reiniciar solo horarios</button>
        </section>
      </section>

      <section class="card">
        <h2>Resumen</h2>
        <div id="resumen" class="resumen vacío">Aún no hay configuración guardada.</div>
      </section>
    </main>

    <script src="script.js"></script>
  </body>
</html>
